<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Terrain Route: Bornheim to Davos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/css/ol.css">
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/build/ol.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        const bornheim = ol.proj.fromLonLat([7.0141, 50.7852]);
        const davos = ol.proj.fromLonLat([9.8458, 46.8032]);

        const route = [
            bornheim,
            ol.proj.fromLonLat([7.7689, 49.4478]), // Kaiserslautern
            ol.proj.fromLonLat([9.1829, 48.7758]), // Stuttgart
            ol.proj.fromLonLat([9.1732, 47.6779]), // Friedrichshafen
            davos
        ];

        const map = new ol.Map({
            target: 'map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                }),
                new ol.layer.Vector({
                    source: new ol.source.Vector({
                        features: [new ol.Feature({
                            geometry: new ol.geom.LineString(route)
                        })]
                    }),
                    style: new ol.style.Style({
                        stroke: new ol.style.Stroke({
                            color: 'red',
                            width: 4
                        })
                    })
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([8.4, 48.5]),
                zoom: 7
            })
        });

        // Add markers for start and end points
        const addMarker = (coordinates) => {
            const marker = new ol.Feature({
                geometry: new ol.geom.Point(coordinates)
            });
            marker.setStyle(new ol.style.Style({
                image: new ol.style.Circle({
                    radius: 7,
                    fill: new ol.style.Fill({color: 'black'}),
                    stroke: new ol.style.Stroke({
                        color: 'white', width: 2
                    })
                })
            }));
            const vectorSource = new ol.source.Vector({
                features: [marker]
            });
            const markerVectorLayer = new ol.layer.Vector({
                source: vectorSource,
            });
            map.addLayer(markerVectorLayer);
        };

        addMarker(bornheim);
        addMarker(davos);

        // Animate along the route
        let routeIndex = 0;
        const animateRoute = () => {
            if (routeIndex < route.length) {
                map.getView().animate({
                    center: route[routeIndex],
                    duration: 2000,
                    zoom: 10
                });
                routeIndex++;
                setTimeout(animateRoute, 2000);
            } else {
                routeIndex = 0;
                setTimeout(animateRoute, 2000);
            }
        };

        setTimeout(animateRoute, 2000);
    </script>
</body>
</html>
